<!DOCTYPE html>
<html>
<head>
    <title>Product List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        #search-bar{
            margin-top: 1%;
            margin-left: 35%;
            width: 30%;
            padding: 10px;
            font-size: 10px;
        }
        h3{
            margin-left: 10%;
            font-family:sans-serif;
        }
        h4{
            font-family: fantasy;
            font-size: 15px;
            font-weight: light;
        }
        
        .product_list {
            list-style: none; /* Remove default bullet points */
            padding: 0; /* Remove default padding */
            margin: 0; /* Remove default margins */
            display: flex; /* Enable flexbox for layout */
            flex-wrap: wrap; /* Allow items to wrap onto multiple lines */
            justify-content: space-between; /* Distribute space between items */
            }

        .product_list .li {
            width: calc(33.33% - 20px); /* Calculate width for 3 items per row, adjust 20px for margin/padding */
            margin-bottom: 20px; /* Add spacing between rows */
            box-sizing: border-box;  /* Include padding and border in the element's total width and height */
            padding: 10px; /* Add some padding around the product */
            border: 1px solid #eee; /.product_list{
                        display: flex;
                        flex-wrap: wrap;
                        justify-content: space-around;
                        box-sizing: border-box;
                    }  
            /* Optional: Add a border */
            
            text-align: center; /* Center the text within each product */
            }

            .product_list .li img {
            max-width: 100%; /* Make sure the image scales within its container */
            height: auto; /* Maintain aspect ratio */
            display: block; /* Makes the image a block element to prevent text wrapping issues */
            margin-left: auto;
            margin-right: auto;
            }

            .product_list .li p {
                margin-top: 10px; /* Add space between image and text */
                font-family:fantasy;
                
            }


        /* Responsive adjustments (optional) */
        @media (max-width: 768px) { /* Adjust breakpoint as needed */
        .product_list .li {
            width: calc(50% - 20px); /* 2 items per row on smaller screens */
            }
            }

        @media (max-width: 480px) { /* Adjust breakpoint as needed */
        .product_list .li {
            width: 100%; /* 1 item per row on even smaller screens */
            }
            }

    </style>

</head>
<body>
        <!-- search bar -->
    <form method="GET" action="" style="font-weight: bold;"></form>
    <input type="text" id="search-bar" placeholder="Search Products" onkeyup="filterProducts()">
    <button type="submit">Search</button>
    </form>

    <div id="search-popup" style="display:none;">
    <!-- Results from AJAX will be injected here -->

    {% if not products %}
    <p>No products found for "{{ query }}".</p>
    {% endif %}
</div>

    <div id="products">
    <div class="row store-pd-container">

    <div class="product_list">
            {% for product in products %}
            <li class="li" data-name="{{ product.name }}" data-category="{{ product.category }}">
                <a href="{% url 'product_detail' product.id %}">
                    <img style="height: 75%; width: 85%;" src="{{ product.image.url }}" alt="{{ product.name }}" width="100">
                </a>
                <p style="font-size: 150%;">{{ product.name }} - ${{ product.unit_price }}</p>
                <h4>{{ product.description }}</h4>
            </li>
            {% endfor %}
    </div>
    <script>

function filterProducts() {
        const query = document.getElementById('search-bar').value.toLowerCase();
        const products = document.querySelectorAll('.product_list li');

        products.forEach(product => {
            const productName = product.getAttribute('data-name').toLowerCase();
            const productCategory = product.getAttribute('data-category').toLowerCase();

            if (productName.includes(query) || productCategory.includes(query)) {
                product.style.display = 'block';
            } else {
                product.style.display = 'none';
            }
        });
    }
        </script>

</body>
</html>
